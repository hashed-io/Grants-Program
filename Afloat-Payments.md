# W3F Grant Proposal

- **Project Name:** Afloat Open source payment integration
- **Team Name:** Afloat Inc.
- **Payment Address:** bc1q0aghk8qufzwpmrp5nfyu9r7dh3yynmphk7rhjj
- **[Level](https://github.com/w3f/Grants-Program/tree/master#level_slider-levels):** 2


## Overview

[Afloat](https://stayafloat.io/#/) is one of the first real-use cases of blockchain technology in the accounting industry. It enables the fractional buying and selling of tax credits that historically have been inefficient, opaque, and centralized. It has already processed tax credits ranging in orders from $2K -$70k USD.

Afloat has migrated to Polkadot, and is looking to build an open source component needed to integrate with Dwolla, a low fee fiat on/off ramp focused on Traditional Banking integration, that provides account verification and KYC. This proposal would enable any substrate project to easily integrate with Dwolla. It also includes components that can be used with any payment integrator.

## Project Details

### Background

To drive mass adoption, bridges to the current banking system are needed. Afloat is a great use case that connects blockchain and government taxes. And like many other projects, need integration with the current banking system that facilitates compliance with US regulation.

The product explainer from the previous proposal can be found [here](https://github.com/Afloat-Inc/Grants-Program/blob/master/applications/Afloat.md#Product)

### Workflow

<p align="center">
  <img width="700" src="https://user-images.githubusercontent.com/7217054/226731648-04c7df9b-9774-4ced-8a30-9c7252c22b74.png">
</p>
<br />

This diagram details the components used in the Banking (Dwolla) - Substrate integration. 

<p align="center">
  <img width="700" src="https://user-images.githubusercontent.com/7217054/227053993-fe3eff5b-e0ff-45df-a467-04c565d856df.png">
</p>
<br />


### Details

The full integration consists on two phases. And this proposal includes the first phase. We've broken up the proposal to use all the learnings from Phase 1 and Dwolla's integration to better estimate Phase 2.

#### Phase 1 - Create the API and Entrypoints for:
1. Creating a Dwolla account as a personal verified customer.
2. Adding a bank account to a Dwolla account.
3. Verifying a bank account using micro deposits.
4. Depositing funds into a Dwolla balance.
5. Transferring funds from a Dwolla balance to another user's Dwolla balance.
6. Withdrawing funds from a Dwolla balance.
7. Webhook endpoints to handle events generated by Dwolla.
8. Minting tokens when a user makes a deposit.

#### Phase 2 - Create a functional API and service for:
9. Burning tokens when a user makes a withdrawal.
10. Set up Indexer service
11. Enable the mapped assets pallet indexing process to transfer funds between users when a transfer of tokens is made on the pallet.

## Ecosystem Fit

Help us locate your project in the Polkadot/Substrate/Kusama landscape and what problems it tries to solve by answering each of these questions:

Where and how does your project fit into the ecosystem?
Our target audience are developers and entrepeneurs looking to launch products that require US compliant Fiat integration. 
Are there any other projects similar to yours in the Substrate / Polkadot / Kusama ecosystem?
If so, how is your project different?
If not, are there similar projects in related ecosystems?

Afloat serves tax payers that want to buy and/or sell tax credits. These users will benefit from an easy to use, compliant Fiat on/off ramp which is also a common, top of mind, challenge for digital native projects and developers in the ecosystem. 


### Community

Developers from the Polkadot community will be able to leverage the Fiat integration for the products and send questions to the team.

#### Continuing Education for CPAs

Continuing the migration of Afloat’s, enables the founder and current CEO [Louise Reed](https://www.linkedin.com/in/louisewreed/) to continue her education efforts at a number of CPE conferences, where CPAs receive continuing education credits to maintain their licenses each year. Familiarizing her with Fiat integration with the Polkadot ecosystem will enable her to educate other CPAs about current, compliant and affordable solutions.

#### Crypto Clients

Working in a historically conservative industry, CPAs are starting to feel the push from blockchain/crypto clients to accept the new technology and are now being forced to help with risk mitigation (alongside lawyers).


#### Bridging Communities
Afloat would naturally bridge two opposing communities: accounting, the most trusted and conservative industries, and blockchain, one of the most innovative industries. By association with such a trusted industry, blockchain would receive credibility in the eyes of the general public while also modernizing accounting with new and better processes.

#### Natural Use Case

There is a huge educational and technological divide in the learning curve for accountants when it comes to blockchain, but Afloat adds an easy and natural way to learn.  Most people, including CPAs and businesses, tend to understand only what they can see and experience, and Afloat brings tangibility to an otherwise intangible industry.

#### Speaking arrangements - Check with Louise

Louise Reed is scheduled to speak at the following Certified Public Accountant Societies.

| Date of Talk | CPA Society | Location |
| -----------: | ----------- | -------- |
| 5/26/2022    | NC          | Greensboro |
| 8/24/2022    | GA          | Atlanta |
| 9/26/2022    | VA (+ VA Tech) | Roanoke |
| 11/17/2022   | VA (+ VA Tech) | Virginia Beach |


## Team :busts_in_silhouette:

### Team members

- Louise Reed - CEO and founder
- Sebastian Montero - Architect
- Augusto Lara - Project Manager
- Erick Casanova - Backend Developer
- Didier Mis May - Substrate Developer


### Contact

- **Contact Name:** Louise Reed
- **Contact Email:** louise@stayafloat.io
- **Website:** https://stayafloat.io/#/

### Legal Structure

- **Registered Address:** 6118 Saint Andrews Lane, Richmond, VA 23226
- **Registered Legal Entity:** Afloat, Inc.

### Team's experience

With a master's degree in physics from Duke University and a Master of Accounting from the University of North Carolina at Chapel Hill, Louise W. Reed has been a CPA for fifteen years and has grown a successful private practice that specializes in working with small businesses. In the spring of 2018, Louise conceptualized and founded Afloat to allow her clients to have the same tax opportunities traditionally found in only the largest of CPA firms. Under her leadership, Afloat built the current application (private ethereum clone) with an in-house team and successfully launched in 2021. [Awards](https://stayafloat.io/#/media)

Afloat is partnering with Hashed Systems DAO LLC, a substrate development team with years of experience building blockchain applications. They have worked on substrate and Polkadot since spring 2021. Additional relevant experience below:

[Proxy](https://prxyco.com/) manages $1B plus in assets from foreigh investors looking to benefit from the EB-5 visa program. It was built by real estate and EB5 attorneys, blockchain specialists and licensed investment advisors. It's plattform secures the chain of evidence and approvals between developers and funding sources of the projects leveraging the Polkadot ecosystem. The Hashed team built the entire application, deployed it and currently supports it.

[Hypha DAO](https://dho.hypha.earth/#/): Smart contracts and front end development that enables the creation of flexible roles, assignments and contributions with recurring payments. Design and implement a graph data layer to improve web application performance. Design and build a [Double Entry accounting](https://us02web.zoom.us/rec/share/eRqiBvq-dsV0L_hEjW5e8DWNYQlUn2bLhI8-86jkRVwdXiN3TiD5edym17ubCd9R.QhKQw_Byy0t5_8SW?startTime=1647371674000) (Passcode: .V$C#Br2) plattform that streams wallet activity, supports token price history, reporting and currency conversion.

[SEED](https://joinseeds.earth/): Smart contract and mobile development that capture the project's constitution, enable voting on proposals and basic identity management like reputation, vote history etc. Design and build a PWA token swaps app. Design and build a basic [Economic Simulator](https://seeds-sim.hypha.earth/dashboard) that enables voters to understand the economic impact of policy changes.


### Relevant profile links
- Louise Reed CPA website: https://louisereedcpa.com/
- Louise Reed LinkedIn: https://www.linkedin.com/in/louisewreed/
- Sebastian on GitHub: https://github.com/sebastianmontero 
*  Polkadot Blockchain Academy Graduate (Buenos Aires)
- Jose Maria on Github: https://github.com/jmgayosso and Gitlab: https://gitlab.com/jmgayosso
- Hashed website: https://hashed.io/
- Erick on GitHub: https://github.com/tlacloc


## Development Roadmap :nut_and_bolt:
### Overview
- **Total Estimated Duration:** 13 weeks
- **Full-Time Equivalent (FTE):**  1 FTE (across 4 contributors)
- **Total Costs:** 43,300 USD

#### Languages - Edited by Ercik
- All pallets will be developed in Rust. 
- The custodial/persistence partner backend will be developed in Nodejs, with a slight possibility of porting it to Rust.
- The front end will be Angular, with a possibility that it will be migrated to Vuejs.

### Milestone 1 — User onboarding (set and verify identity with gatekeeper parameters) and slides.
- **Estimated duration:** 5 weeks
- **FTE:**  2
- **Costs:** 17,675 USD
(5 contributors)


1. Creating a Dwolla account as a personal verified customer.
2. Adding a bank account to a Dwolla account.
3. Verifying a bank account using micro deposits.
4. Depositing funds into a Dwolla balance.
5. Transferring funds from a Dwolla balance to another user's Dwolla balance.
6. Withdrawing funds from a Dwolla balance.
7. Webhook endpoints to handle events generated by Dwolla.
8. Minting tokens when a user makes a deposit.

| Number | Deliverable | Specification |
| -----: | ----------- | ------------- |
| 0a. | License | MIT |
| 0b. | Documentation | We will provide **inline documentation** of the code and a basic **tutorial** of the modules delivered in this Milestone.|
| 0c. | Testing | Unit testing will be applied to ensure reliability. Documentation of tests and results will be provided |
| 0d. | Video | We will provide a video demonstration that will illustrate all of the functionality delivered with this milestone. |
| 0e. | Article | We will publish an **article** in English and Spanish that explains what was built and how it can benefit other projects |
| 1. | Create account | Develop an API endpoint to enable users to create a Dwolla account as a personal verified customer. The endpoint should capture the user's personal details such as name, address, date of birth, social security number, and email address. The endpoint should validate the user's details against Dwolla's compliance requirements and create an account if the user passes. The endpoint should return a response indicating whether the account creation was successful or not. |
| 2. | Add bank account | Develop an API endpoint to enable users to add a bank account to their Dwolla account. The endpoint should capture the user's bank account details such as routing number and account number. The endpoint should validate the user's bank account against Dwolla's compliance requirements and add it to the user's account if it passes. The endpoint should return a response indicating whether the bank account addition was successful or not. |
| 3. | Verify account | Develop an API endpoint to enable users to verify their bank account using micro deposits. The endpoint should initiate the micro deposit process by sending two small deposits to the user's bank account. The endpoint should require the user to verify the deposit amounts before the bank account is considered verified. The endpoint should return a response indicating whether the bank account verification was successful or not. | 
| 4. | Deposit funds | Develop an API endpoint to enable users to deposit funds into their Dwolla balance. The endpoint should capture the user's bank account details and the amount to be deposited. The endpoint should validate the user's bank account and initiate a transfer from the user's bank account to their Dwolla balance.The endpoint should return a response indicating whether the deposit was successful or not. |
| 5. | Transfer funds | Develop an API endpoint to enable users to transfer funds from their Dwolla balance to another user's Dwolla balance. The endpoint should capture the recipient's Dwolla account ID and the amount to be transferred. The endpoint should validate the user's balance and initiate a transfer to the recipient's Dwolla balance. The endpoint should return a response indicating whether the transfer was successful or not. |
| 6. | Withdrawing funds | Develop an API endpoint to enable users to withdraw funds from their Dwolla balance. The endpoint should capture the user's bank account details and the amount to be withdrawn. The endpoint should validate the user's balance and initiate a transfer from the Dwolla balance to the user's bank account. The endpoint should return a response indicating whether the withdrawal was successful or not. |
| 7. | Webhook endpoints | Develop webhook endpoints to handle events generated by Dwolla. The endpoints should capture event data such as transaction status updates, bank account verification status, and balance updates. The endpoints should update the user's account based on the event data received. The endpoints should return a response indicating whether the update was successful or not. |
| 8. | Minting tokens | Develop an API endpoint to enable users to mint tokens when they make a deposit.The endpoint should capture the user's deposit amount and issue a corresponding amount of tokens.The endpoint should interact with the Mapped Assets Pallet to mint the tokens and add them to the user's account.The endpoint should return a response indicating whether the minting process was successful or not. |


## Future Plans
### Immediate Use
This proposal is one of two phases that will enable Afloat users to fund their accounts, transfer, buy and sell tax credits using their traditional bank accounts without worrying about compliance or KYC requirements.

### Next Phases
This proposal covers Afloat migration of the current functionality. Below are future phases that expand it:

#### Phase 2
9. Burning tokens when a user makes a withdrawal.

Requirements:
Develop an API endpoint to enable users to burn tokens when they make a withdrawal.
The endpoint should capture the user's withdrawal amount and burn a corresponding amount of tokens.
The endpoint should interact with the Mapped Assets Pallet to burn the tokens from the user's account.
The endpoint should return a response indicating whether the burning process was successful or not.

10. Set up Indexer service
11. Enable the mapped assets pallet indexing process to transfer funds between users when a transfer of tokens is made on the pallet.

Requirements:
Develop a service to enable the mapped assets pallet indexing process to transfer funds between users when a transfer of tokens is made on the pallet.
The service should enable the server to receive notification of the transfer of tokens and transfer funds accordingly.
The service should ensure that the transfer of funds is only made between verified accounts and that there are sufficient funds in the sender's account to cover the transfer.


## Additional Information :heavy_plus_sign:

**How did you hear about the Grants Program?** 
Raul Romanutti recommended the program on a call with Louise Reed, Max Gravitt and Augusto Lara on March 21st, 2022.

